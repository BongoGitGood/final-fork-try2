pico-8 cartridge // http://www.pico-8.com
version 41
__lua__

function _init()
  game_over=false
  win=false
  g=0.025         -- gravity
  make_stars()
  make_ground()
  make_player()
end

function _update()
  if (not game_over) then
    move_player()
    check_land()
  else
    if (btnp(5)) then
      _init()
    end
  end
end

function _draw()
  cls()
  draw_stars()
  draw_ground()
  draw_player()

  print("dx:"..p.dx,2,2,7)
  print("dy:"..p.dy,2,8,7)

  if (game_over) then
    if (win) then
      print("oilfuckers galactic thanks you!",1,48,11)
    else
      print("this is coming out of your pay!",1,48,8)
    end
    print("press ‚ùé to play again",20,70,5)
  end
end

function make_player()
  p={}
  p.x=60                   -- position
  p.y=8
  p.dx=0                   -- movement
  p.dy=0
  p.sprite=1
  p.alive=true
  p.thrust=0.075
end

function make_stars()
  s={}
  s.rand=rndb(0,127)
end

function draw_player()
  spr(p.sprite,p.x,p.y)
  if (game_over and win) then
    spr(4,p.x,p.y-8)       -- flag
  elseif (game_over) then
    spr(5,p.x,p.y)         -- explosion
  end
end

function move_player()
  p.dy+=g                  -- add gravity

  thrust()

  p.x+=p.dx                -- actually move the player
  p.y+=p.dy

  stay_on_screen()
end

function thrust()
  -- add thrust to movement
  if (btn(0)) then
    p.dx-=p.thrust
  end

  if (btn(1)) then
    p.dx+=p.thrust
  end

  if (btn(2)) then
    p.dy-=p.thrust
  end

  -- thrust sound
  if (btn(0) or btn(1) or btn(2)) then
    sfx(0)
  end
end

function stay_on_screen()
  if (p.x<0) then          -- left side
    p.x=0
    p.dx=0
  end
  if (p.x>119) then        -- right side
    p.x=119
    p.dx=0
  end
  if (p.y<0) then          -- top side
    p.y=0
    p.dy=0
  end
end

function rndb(low,high)
  return flr(rnd(high-low+1)+low)
end

function draw_stars()
  srand(s.rand)
  for i=1,50 do
    pset(rndb(0,127),rndb(0,127),rndb(5,7))
  end
end

function make_ground()
  -- create the ground
  gnd={}
  local top=96             -- highest point
  local btm=120            -- lowest point

  -- set up the landing pad
  pad={}
  pad.width=15
  pad.x=rndb(0,126-pad.width)
  pad.y=rndb(top,btm)
  pad.sprite=2

  -- create ground at pad
  for i=pad.x,pad.x+pad.width do
    gnd[i]=pad.y
  end

  -- create ground right of pad
  for i=pad.x+pad.width+1,127 do
    local h=rndb(gnd[i-1]-3,gnd[i-1]+3)
    gnd[i]=mid(top,h,btm)
  end

  -- create ground left of pad
  for i=pad.x-1,0,-1 do
    local h=rndb(gnd[i+1]-3,gnd[i+1]+3)
    gnd[i]=mid(top,h,btm)
  end
end

function draw_ground()
  for i=0,127 do
    line(i,gnd[i],i,127,8)
  end
  spr(pad.sprite,pad.x,pad.y,2,1)
end

function check_land()
  l_x=flr(p.x)             -- left side of lander
  r_x=flr(p.x+7)           -- right side of lander
  b_y=flr(p.y+7)           -- bottom of lander

  over_pad=l_x>=pad.x and r_x<=pad.x+pad.width
  on_pad=b_y>=pad.y-1
  slow=p.dy<1

  if (over_pad and on_pad and slow) then
    end_game(true)
  elseif (over_pad and on_pad) then
    end_game(false)
  else
    for i=l_x,r_x do
      if (gnd[i]<=b_y) then
        end_game(false)
      end
    end
  end
end

function end_game(won)
  game_over=true
  win=won

  if (win) then
    sfx(1)
  else
    sfx(2)
  end
end

__gfx__
0000000000ba980077777777b7777777000000000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000dcba980777777bbbbb77777000000000899998000000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070098dcba98007777b7b777770000000000899aa99800000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000a98dcba9000777bbbbb77700000b600089aaaa9800000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000ba98dcba00077777b7b7770000bb600089aaaa9800000000000000000000000000000000000000000000000000000000000000000000000000000000
0070070006666660000007bbbbb000000bbb6000899aa99800000000000000000000000000000000000000000000000000000000000000000000000000000000
000000000707707000000007b7700000000060000899998000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000770770770000000077700000000060000088880000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00770070700000777000007770777077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00707070700700707000007070007070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00707007000000707000007077077077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00707070700700707000007070007000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777070700000777007007770007077700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00770070700000777000007770707077707700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00707070700700707000007000707070700700000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000
00707077700000707000007770777077770700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00707000700700707000000070007000700700000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00777077700000777007007770007000707770000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000600000000000000000000000000000000000000000000000070000000000000000000000000000000000000000000000000000000
00000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000600000000000000000000000000
00000000000000000000000000000000000000000006000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000500000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000050000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000007000000000000000000000000000000000000000000000000000000000000
00bb0bbb0b000bbb0b0b00bb0b0b0bbb0bbb00bb000000bb0bbb0b000bbb00bb0bbb0bbb00bb00000bbb0b0b0bbb0bb00b0b00bb00000b0b00bb0b0b00b00000
0b0b00b00b000b000b0b0b000b0b0b000b0b0b0000000b000b0b0b000b6b0b0000b000b00b00000000b00b0b0b0b0b0b0b0b0b0000000b0b0b0b0b0b00b00000
0b0b00b00b000bb00b0b0b000bb00bb00bb00bbb00000b000bbb0b000bbb0b0000b000b00b00000000b00bbb0bbb0b0b0bb00bbb00000bbb0b0b0b0b00b00000
0b0b00b00b000b000b0b0b000b0b0b000b0b000b00000b0b0b0b0b000b0b0b0000b000b00b00000000b00b0b0b0b0b0b0b0b000b0000000b0b0b0b0b00000000
0bb00bbb0bbb0b0000bb00bb0b0b0bbb0b0b0bb000000bbb0b0b0bbb0b0b00bb00b00bbb00bb000000b00b0b0b0b0b0b0b0b0bb000000bbb0bb000bb00b00000
00070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000050000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00050000000000000000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000555055505550055005500000055555000000555005500000555050005550505000005550055055505550550000000000000000000000
00000000000000000000505050505000500050000000550505500000050050500000505050005050505000005050500050500500505000000000000000000000
00000000000000000000555055005500555055500000555055500000050050500000555050005550555000005550500055500500505000000000000000000000
00000000000000000000500050505000005000500000550505500000050050500000500050005050005000005050505050500500505000000000000000000000
00000000000000000000500050505550550055000000055555000000050055000000500055505050555000005050555050505550505000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000700000500000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000060000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000005000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000500000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006000000000000000
08888888000000000000000880800000000000008000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
08888888800000000000000888880000000000088000000000000050000000000000000000000000000000000006000000000000000000000000000000000000
888888888008000080000008888800000600008888000000000000000000000000000000000000000000000000000000000000000000000b6000000000000000
88888888888800008888808888880000000000888800000000000000000000000000000000000000000000000000000600000000000000bb6000000000000000
8888888888880000888880888888800000800088888000000000000000000000000000000000000000000000000000000000000000000bbb6000000000000000
88888888888888088888808888888080808888888880000000000000000000000000000000000000000000000000000000000000000000006000000000000000
88888888888888088888888888888888888888888880000000000000000000000000000000000000000000000000000000000000000000006000000000000000
88888888888888888888888888888888888888888888000000000000000000000008000000000000000000000000000000000000000000ba9800000000000000
8888888888888888888888888888888888888888888808000000000000000000880800000000800000000000000000000000000000000dcba980000000000000
88888888888888888888888888888888888888888888888080000000000000008808000000008000000000000000000000000000800098dcba98000000000000
888888888888888888888888888888888888888888888888800000000000000088888000000880000000000000000000000000008000a98dcba9000000000000
888888888888888888888888888888888888888888888888888000000000800888888080808888080000000000000000000000008800ba98dcba000000000000
88888888888888888888888888888888888888888888888888800000008088088888888080888808000000000000000500000008880006666660000000000008
88888888888888888888888888888888888888888888888888800000088088888888888888888888800000000000000000000008888007077070000000080808
88888888888888888888888888888888888888888888888888880808088888888888888888888888800000000000000000000088888077077077000000080888
8888888888888888888888888888888888888888888888888888088808888888888888888888888888007000000000000000008888877777777b777777780888
88888888888888888888888888888888888888888888888888880888888888888888888888888888880000000000000000000088888777777bbbbb7777788888
88888888888888888888888888888888888888888888888888888888888888888888888888888888880000000000000000088888888887777b7b777778888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888000000000000000088888888888777bbbbb7778888888
8888888888888888888888888888888888888888888888888888888888888888888888888888888888800800000800000068888888888877777b7b7778888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888000008000000888888888888887bbbbb8888888888
8888888888888888888888888888888888888888888888888888888888888888888888888888888888888800008800008088888888888888887b778888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888800088800080888888888888888887778888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888800888800888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888
88888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888888

__sfx__
9008000014750147001e5001e500165001650017500195001d5001e5001e5001e5001e5001e500215001d5001d5001e5002150027500295000050000500005000050000500005000050000500005000050000500
300c000014775147751477514775177751a7751a77519775167751477515775177751a7751c7751d7751e7751f775007050070500705007050070500705007050070500705007050070500705007050070500705
010a00002855420554195541c55417554167541675412754147540d5540c554105540c5540b754097540375405754025540355403554005040050400504005040050400504005040050400504005040050400504
